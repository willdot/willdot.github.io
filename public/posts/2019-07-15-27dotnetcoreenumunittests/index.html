<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Unit testing every enum value | Willdot</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="I sometimes have to unit test that a certain things happen depending on a different enum value, and there are always new enum values being added. So I don&rsquo;t have to change my unit tests to add in a new test for the new enum, I use a trick in xUnit to try against every enum value.
Let&rsquo;s say I have an enum like this.
public enum Things {  Phone = 1,  Bottle,  Mouse,  Airpods } I want to be able to loop through each of the values and make sure my test works with each of them.">
    <meta name="generator" content="Hugo 0.99.1" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Unit testing every enum value" />
<meta property="og:description" content="I sometimes have to unit test that a certain things happen depending on a different enum value, and there are always new enum values being added. So I don&rsquo;t have to change my unit tests to add in a new test for the new enum, I use a trick in xUnit to try against every enum value.
Let&rsquo;s say I have an enum like this.
public enum Things {  Phone = 1,  Bottle,  Mouse,  Airpods } I want to be able to loop through each of the values and make sure my test works with each of them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://willdot.net/posts/2019-07-15-27dotnetcoreenumunittests/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-07-15T00:00:00+00:00" />

<meta itemprop="name" content="Unit testing every enum value">
<meta itemprop="description" content="I sometimes have to unit test that a certain things happen depending on a different enum value, and there are always new enum values being added. So I don&rsquo;t have to change my unit tests to add in a new test for the new enum, I use a trick in xUnit to try against every enum value.
Let&rsquo;s say I have an enum like this.
public enum Things {  Phone = 1,  Bottle,  Mouse,  Airpods } I want to be able to loop through each of the values and make sure my test works with each of them."><meta itemprop="datePublished" content="2019-07-15T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-07-15T00:00:00+00:00" />
<meta itemprop="wordCount" content="362">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unit testing every enum value"/>
<meta name="twitter:description" content="I sometimes have to unit test that a certain things happen depending on a different enum value, and there are always new enum values being added. So I don&rsquo;t have to change my unit tests to add in a new test for the new enum, I use a trick in xUnit to try against every enum value.
Let&rsquo;s say I have an enum like this.
public enum Things {  Phone = 1,  Bottle,  Mouse,  Airpods } I want to be able to loop through each of the values and make sure my test works with each of them."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Willdot
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Unit testing every enum value</h1>
      
      <p class="tracked">
        By <strong>Will Andrews</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-07-15T00:00:00Z">July 15, 2019</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>I sometimes have to unit test that a certain things happen depending on a different enum value, and there are always new enum values being added. So I don&rsquo;t have to change my unit tests to add in a new test for the new enum, I use a trick in xUnit to try against every enum value.</p>
<p>Let&rsquo;s say I have an enum like this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> Things
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    Phone = <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>    Bottle,
</span></span><span style="display:flex;"><span>    Mouse,
</span></span><span style="display:flex;"><span>    Airpods
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I want to be able to loop through each of the values and make sure my test works with each of them.</p>
<p>So in my xUnit test, I can use the &ldquo;MemberData&rdquo; attribute in conjunction with the &ldquo;Theory&rdquo; attribute. Then I can create a static method that will return each of the values of the enum and these will then be used as the theory data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ThingsUnitTests</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [MemberData(&#34;enumValues&#34;)]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TestEachType(Things thing)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Assert.IsType&lt;Things&gt;(thing);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;<span style="color:#66d9ef">object</span>[]&gt; enumValues()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> thing <span style="color:#66d9ef">in</span> Enum.GetValues(<span style="color:#66d9ef">typeof</span>(Things)))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">object</span>[] { thing };
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>See how the MemberData attribute is given the name of the method that returns each of the enum values. Then the parameter to the test method is an enum value. In this test I just make sure the value is of my enum type.</p>
<h2 id="extra-parameters-to-the-static-method">Extra parameters to the static method</h2>
<p>What if I wanted to ignore some enum values, because they are irrelevant to the test. You can add parameters to the static method that returns the enum values and then pass an array of values into the MemberData attribute.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EnumValueTests</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [Theory]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">    [MemberData(&#34;enumValues&#34;, new []</span>{ <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>})]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> TestEachType(Things thing)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        Assert.IsType&lt;Things&gt;(thing);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> IEnumerable&lt;<span style="color:#66d9ef">object</span>[]&gt; enumValues(<span style="color:#66d9ef">int</span>[] ignore)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">var</span> thing <span style="color:#66d9ef">in</span> Enum.GetValues(<span style="color:#66d9ef">typeof</span>(Things)))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (!ignore.Contains((<span style="color:#66d9ef">int</span>)thing))
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">object</span>[] { thing };
</span></span><span style="display:flex;"><span>            } 
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now, my test results will show that only Airpods and mouse are tested. This happens because when looping through each value of my enum, I check if that numeric value is in the array of ints to ignore. It it isn&rsquo;t, then I return it as a value for my test to use.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://willdot.net" >
    &copy;  Willdot 2022 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
